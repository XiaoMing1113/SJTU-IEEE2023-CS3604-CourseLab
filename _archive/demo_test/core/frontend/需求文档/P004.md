# 测试覆盖率追踪报告

## 概览与配比
- 总子需求数: 12 (针对 P004 模块)
- 当前规划统计（近似值）:
  - Unit: ≈3
  - Component: ≈6
  - Integration: ≈2
  - E2E: ≈1

## src/pages/P004/RegisterPage.jsx

### ✅ 单元测试 (Unit)
- 密码一致性校验 (tests/frontend/pages/P004_Register/unit/password_match.spec.ts)
- 验证当password与confirmPassword不一致时校验函数返回false
- 格式正则校验 (tests/frontend/pages/P004_Register/unit/regex_validation.spec.ts)
- 验证身份证号校验逻辑(是否为18位, 最后一位是否合法)
- 验证手机号校验逻辑(是否为11位数字, 开头是否符合运营商规则)
- 注册参数构造 (tests/frontend/pages/P004_Register/unit/payload_construct.spec.ts)
- 验证表单数据被正确转换为后端所需的JSON格式(如去除confirmPassword字段)

### 🧩 组件测试 (Component)
- 初始渲染完整性 (tests/frontend/pages/P004_Register/component/initial_render.spec.tsx)
- 验证页面包含用户名、密码、确认密码、姓名、身份证号、手机号等所有必填输入框
- 验证存在“已有账号？去登录”的跳转链接
- 实时验证反馈 (tests/frontend/pages/P004_Register/component/realtime_validation.spec.tsx)
- 验证在“确认密码”输入框失去焦点(blur)且与密码不一致时显示红色错误提示
- 验证输入非数字字符到手机号输入框时是否被拦截或显示错误
- 必填项拦截 (tests/frontend/pages/P004_Register/component/required_fields.spec.tsx)
- 验证保持表单为空点击注册按钮时页面显示“请填写完整信息”或对应字段变红
- 协议勾选交互 (tests/frontend/pages/P004_Register/component/agreement_checkbox.spec.tsx)
- 验证未勾选“服务协议”复选框时点击注册按钮被拦截并提示用户
- 提交状态反馈 (tests/frontend/pages/P004_Register/component/submit_loading.spec.tsx)
- 验证点击注册后按钮进入Loading状态且不可点击防止重复注册
- 错误信息展示 (tests/frontend/pages/P004_Register/component/server_error.spec.tsx)
- 模拟后端返回“该身份证已被注册”错误验证页面正确显示该具体错误信息

### 🔗 集成测试 (Integration)
- 注册成功跳转 (tests/frontend/pages/P004_Register/integration/register_success.spec.tsx)
- 填写完整合法表单 -> Mock后端返回200成功 -> 验证路由跳转至登录页(/login) -> 验证可能显示的“注册成功”提示
- 注册失败处理 (tests/frontend/pages/P004_Register/integration/register_failure.spec.tsx)
- 填写表单 -> Mock后端返回409(Conflict/用户已存在) -> 验证页面未跳转并显示后端返回的错误描述

### 🚀 E2E 测试 (Playwright)
- 新用户注册流程 (tests/e2e/register_flow.spec.ts)
- 访问/register -> 填写所有字段 -> 勾选协议 -> 点击注册 -> 验证跳转至登录页 -> 使用新账号尝试登录