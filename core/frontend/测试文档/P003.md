# 测试覆盖率追踪报告

## 概览与配比
- 总子需求数: 10 (针对 P003 模块)
- 当前规划统计（近似值）:
  - Unit: ≈2
  - Component: ≈5
  - Integration: ≈2
  - E2E: ≈1

## src/pages/P003/LoginPage.jsx

### ✅ 单元测试 (Unit)
- 表单字段校验逻辑 (tests/frontend/pages/P003_Login/unit/validation.spec.ts)
- 验证用户名/手机号字段为空时的校验函数返回false
- 验证密码字段长度小于特定值(如6位)时的校验函数返回false
- 登录参数构造 (tests/frontend/pages/P003_Login/unit/payload.spec.ts)
- 验证输入username和password后构造的API请求体格式是否符合后端要求

### 🧩 组件测试 (Component)
- 初始渲染完整性 (tests/frontend/pages/P003_Login/component/initial_render.spec.tsx)
- 验证页面包含“账号登录”标题、用户名输入框、密码输入框和登录按钮
- 验证存在“注册账号”和“忘记密码”的链接或按钮
- 输入交互与状态同步 (tests/frontend/pages/P003_Login/component/input_interaction.spec.tsx)
- 验证在用户名输入框键入内容后组件状态正确更新
- 验证在密码输入框键入内容后组件状态正确更新且type属性为password
- 表单验证反馈 (tests/frontend/pages/P003_Login/component/validation_feedback.spec.tsx)
- 验证直接点击登录按钮时页面显示“请输入用户名/密码”的错误提示
- 验证输入格式错误的手机号(如需)时显示相应的格式错误提示
- 加载状态反馈 (tests/frontend/pages/P003_Login/component/loading_state.spec.tsx)
- 验证点击登录按钮触发API请求期间按钮文本变为“登录中...”且处于disabled状态
- 错误提示渲染 (tests/frontend/pages/P003_Login/component/error_display.spec.tsx)
- 模拟API返回错误信息(如"用户名或密码错误")验证页面顶部或表单下方显示红色错误提示框

### 🔗 集成测试 (Integration)
- 登录成功流程 (tests/frontend/pages/P003_Login/integration/login_success.spec.tsx)
- Mock后端返回200及Token -> 填写表单点击登录 -> 验证Token被存入localStorage/Context -> 验证路由跳转至首页(/)或来源页
- 登录失败流程 (tests/frontend/pages/P003_Login/integration/login_failure.spec.tsx)
- Mock后端返回401(Unauthorized) -> 填写表单点击登录 -> 验证页面停留在当前页并显示后端返回的错误消息

### 🚀 E2E 测试 (Playwright)
- 用户登录闭环 (tests/e2e/login_flow.spec.ts)
- 验证访问/login页面 -> 输入有效测试账号密码 -> 点击登录 -> 验证页面URL跳转至首页且Header显示用户信息